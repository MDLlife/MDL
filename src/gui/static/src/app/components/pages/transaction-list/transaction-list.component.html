<app-header [headline]="'title.transactions' | translate"></app-header>
<div class="container">
  <app-loading-content
    [isLoading]="!allTransactions"
    [noDataText]="!allTransactions || allTransactions.length === 0 ? 'history.no-txs' : 'history.no-txs-filter'"
    *ngIf="!transactions || transactions.length === 0"
  ></app-loading-content>

  <div class="-paper" *ngIf="transactions && transactions.length > 0">
    <ng-container *ngFor="let transaction of transactions">
      <div class="-transaction" (click)="showTransaction(transaction)">
        <div class="-icon" [ngClass]="{ '-incoming': transaction.balance.isGreaterThan(0) && !transaction.coinsMovedInternally, '-pending': !transaction.confirmed }">
          <img src="/assets/img/send-black.png">
        </div>
        <div class="-address">
          <ng-container *ngIf="!transaction.coinsMovedInternally">
            <h4 *ngIf="transaction.balance.isLessThan(0) && transaction.confirmed">
              {{ 'history.sent' | translate }} {{ 'coin' | commonText }}
              <span class="-timestamp">{{ transaction.timestamp | dateTime }}</span>
            </h4>
            <h4 *ngIf="transaction.balance.isLessThan(0) && !transaction.confirmed">
              {{ 'history.sending' | translate }} {{ 'coin' | commonText }}
              <span class="-pending">{{ 'history.pending' | translate }}</span>
            </h4>
            <h4 *ngIf="transaction.balance.isGreaterThan(0) && transaction.confirmed">
              {{ 'history.received' | translate }} {{ 'coin' | commonText }}
              <span class="-timestamp">{{ transaction.timestamp | dateTime }}</span>
            </h4>
            <h4 *ngIf="transaction.balance.isGreaterThan(0) && !transaction.confirmed">
              {{ 'history.receiving' | translate }} {{ 'coin' | commonText }}
              <span class="-pending">{{ 'history.pending' | translate }}</span>
            </h4>
          </ng-container>
          <ng-container *ngIf="transaction.coinsMovedInternally">
            <h4 *ngIf="transaction.confirmed">
              {{ 'history.moved' | translate }} {{ 'coin' | commonText }}
              <span class="-timestamp">{{ transaction.timestamp | dateTime }}</span>
            </h4>
            <h4 *ngIf="!transaction.confirmed">
              {{ 'history.moving' | translate }} {{ 'coin' | commonText }}
              <span class="-pending">{{ 'history.pending' | translate }}</span>
            </h4>
          </ng-container>
          <div class="-item" *ngFor="let address of transaction.addresses">
            <img src="../../../../assets/img/qr-code-black.png" (click)="showQrCode($event, address)" class="qr-code-button">
            <span>{{ address }}</span>
          </div>
          <div class="-item" *ngIf="transaction.note">
            <span>{{ 'history.note' | translate }}: <span class="note">{{ transaction.note }}</span></span>
          </div>
        </div>
        <div class="-balance">
          <h4>{{ transaction.balance.toString() | amount }}</h4>
          <p *ngIf="price" [matTooltip]="'tx.current-rate' | translate">
            {{ transaction.balance * price | currency:'USD':'symbol':'1.2-2' }}<span>*</span>
          </p>
        </div>
      </div>
    </ng-container>
  </div>
</div>
